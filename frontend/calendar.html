<!DOCTYPE html>
<html>
<head>
  <title>my movie</title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" type="text/css" href="css/fullcalendar.min.css">
  <link rel="stylesheet" type="text/css" href="css/fullcalendar.print.css" media="print">
  <link rel="stylesheet" type="text/css" href="css/calendar.css">
  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  <script type="text/javascript" src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.3.1.min.js"></script>
  <script type="text/javascript">
    

    $(function() {
      $.get('test.json',function(data){
        
        //现在的测试数据传过来是字符串,所以要转换一下,直接访问接口的话不需要
        var data = JSON.parse(data);
        // console.log(data);
        //将data保存下来,之后可以根据titil来查询src,cover
        var dict = data;
        console.log(dict);
        // console.log(dict);
        //eventData保存日历里的event数据
        var eventData = [];
        // 保存测试的20个日期
        var dates = [];
        for(var i=0;i<20;i++){
          var date = i+16;
          dates.push('2018-06-'+date.toString());
        }
        var index=0;
        for(var title in data){
          // movie里其实只有一条数据,不知道怎么访问到key,只能先用遍历了

          // for(var title in data[index]){
            var temp = {
              start: dates[index],
              title: title
             }
             index++;
            eventData.push(temp);
          // }

        }
        $('#calendar').fullCalendar({
          defaultView: 'month',
          events: eventData,
          fixedWeekCount:false,
          eventRender: function(event, element) {
            console.log('element',element)
            element.css({'background-color':'#fff','color':'red','border':'0'})
            // element.css('color','red')
            var title = element.find('.fc-title').text();
            // console.log(dict[])
            // console.log(title,dict[title].cover)
            var pic = '<div class="picWrapper"></div>'
            
            element.append(pic);
            element.find('.picWrapper').css({'background-image':'url('+dict[title].cover+')','href':dict[title].source});
                    

            // console.log('title',title)
          }
        // events: [
        //   {
        //     start: '2018-04-24',
        //     end: '2018-04-28',
        //     overlap: false,
        //     rendering: 'background',
        //     color: '#ff9f89',
        //     // image: 'url("img/logo1.png")'

        //   },
        //   {
        //     start: '2018-04-06',
        //     end: '2018-04-08',
        //     overlap: false,
        //     rendering: 'background',
        //     color: '#ff9f89'
        //   }
        // ]
      });

      })
      // $('#calendar').fullCalendar({
      //   defaultView: 'month',
      //   events: 'https://fullcalendar.io/demo-events.json',
      //   fixedWeekCount:false,
      //   eventRender: function(event, element) {
      //     console.log('element',element)
      //     element.css('color','red')
      //     var title = element.find('.fc-title').text();
      //     console.log(title)
      //     // console.log('title',title)
      //   }
      //   // events: [
      //   //   {
      //   //     start: '2018-04-24',
      //   //     end: '2018-04-28',
      //   //     overlap: false,
      //   //     rendering: 'background',
      //   //     color: '#ff9f89',
      //   //     // image: 'url("img/logo1.png")'

      //   //   },
      //   //   {
      //   //     start: '2018-04-06',
      //   //     end: '2018-04-08',
      //   //     overlap: false,
      //   //     rendering: 'background',
      //   //     color: '#ff9f89'
      //   //   }
      //   // ]
      // });

    });




  </script>
</head>
<body>
  
  <div class="all">
    <div id="calendarWrapper">
      <div id="calendar"></div>
    </div>
    <div id="sidebarWrapper">
      <div id="searchWrapper">
        <form class="form-inline">
          <div class="form-group">
            <input type="text" class="form-control" id="exampleInputName2" placeholder="Jane Doe">
          </div>
          
          <button type="submit" class="btn btn-default">Search</button>
        </form>
      </div>
      <div id="doubanWrapper">
        <button type="button" class="btn btn-info">豆瓣推荐</button>
      </div>
      <div id="friendsWrapper">
        <h3>朋友推荐</h3>
        <ul id='friendsList'>
          <li>test1</li>
          <li>test2</li>
          <li>test3</li>
        </ul>
      </div>
    </div>
  </div>

  
  
  <script type="text/javascript" src="js/moment.js"></script>
  <script type="text/javascript" src="js/fullcalendar.min.js"></script>
  <!-- Latest compiled and minified JavaScript -->
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
  <script type="text/javascript" src="js/calendar.js"></script>
</body>
</html>